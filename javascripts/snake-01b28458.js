function preload(){this.load.image("food","../images/food-fefd803a.png"),this.load.image("body","../images/body-7fd30dad.png")}function create(){var i=new Phaser.Class({Extends:Phaser.GameObjects.Image,initialize:function(i,e,t){Phaser.GameObjects.Image.call(this,i),this.setTexture("food"),this.setPosition(16*e,16*t),this.setOrigin(0),this.total=0,i.children.add(this)},eat:function(){this.total++;var i=Phaser.Math.Between(0,39),e=Phaser.Math.Between(0,29);this.setPosition(16*i,16*e)}}),e=new Phaser.Class({initialize:function(i,e,t){this.headPosition=new Phaser.Geom.Point(e,t),this.body=i.add.group(),this.head=this.body.create(16*e,16*t,"body"),this.head.setOrigin(0),this.alive=!0,this.speed=100,this.moveTime=0,this.tail=new Phaser.Geom.Point(e,t),this.heading=RIGHT,this.direction=RIGHT},update:function(i){if(i>=this.moveTime)return this.move(i)},faceLeft:function(){this.direction!==UP&&this.direction!==DOWN||(this.heading=LEFT)},faceRight:function(){this.direction!==UP&&this.direction!==DOWN||(this.heading=RIGHT)},faceUp:function(){this.direction!==LEFT&&this.direction!==RIGHT||(this.heading=UP)},faceDown:function(){this.direction!==LEFT&&this.direction!==RIGHT||(this.heading=DOWN)},move:function(i){switch(this.heading){case LEFT:this.headPosition.x=Phaser.Math.Wrap(this.headPosition.x-1,0,40);break;case RIGHT:this.headPosition.x=Phaser.Math.Wrap(this.headPosition.x+1,0,40);break;case UP:this.headPosition.y=Phaser.Math.Wrap(this.headPosition.y-1,0,30);break;case DOWN:this.headPosition.y=Phaser.Math.Wrap(this.headPosition.y+1,0,30)}return this.direction=this.heading,Phaser.Actions.ShiftPosition(this.body.getChildren(),16*this.headPosition.x,16*this.headPosition.y,1,this.tail),Phaser.Actions.GetFirst(this.body.getChildren(),{x:this.head.x,y:this.head.y},1)?(this.alive=!1,!1):(this.moveTime=i+this.speed,!0)},grow:function(){this.body.create(this.tail.x,this.tail.y,"body").setOrigin(0)},collideWithFood:function(i){return this.head.x===i.x&&this.head.y===i.y&&(this.grow(),i.eat(),this.speed>20&&i.total%5==0&&(this.speed-=5),!0)}});food=new i(this,3,4),snake=new e(this,8,8),cursors=this.input.keyboard.createCursorKeys()}function update(i){snake.alive&&(cursors.left.isDown?snake.faceLeft():cursors.right.isDown?snake.faceRight():cursors.up.isDown?snake.faceUp():cursors.down.isDown&&snake.faceDown(),snake.update(i)&&snake.collideWithFood(food)&&repositionFood())}function repositionFood(){for(var i=[],e=0;e<30;e++){i[e]=[];for(var t=0;t<40;t++)i[e][t]=!0}snake.updateGrid(i);for(var s=[],e=0;e<30;e++)for(var t=0;t<40;t++)!0===i[e][t]&&s.push({x:t,y:e});if(s.length>0){var a=Phaser.Math.RND.pick(s);return food.setPosition(16*a.x,16*a.y),!0}return!1}var config={type:Phaser.WEBGL,width:380,height:270,backgroundColor:"#2D3436",parent:"phaser-snake",scene:{preload:preload,create:create,update:update}},snake,food,cursors,UP=0,DOWN=1,LEFT=2,RIGHT=3;if(document.getElementById("phaser-snake"))var game=new Phaser.Game(config);